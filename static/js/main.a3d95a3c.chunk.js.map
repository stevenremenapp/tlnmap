{"version":3,"sources":["components/Sidebar.js","components/MapPin.js","components/Infowindow.js","components/Map.js","App.js","index.js"],"names":["Sidebar","_handleCheckboxChange","checked","_this","setState","reciprocalBorrowerChecked","props","filterReciprocal","_handleSidebarStateChange","state","handleSidebarStateChange","_this2","this","react_default","a","createElement","BurgerMenu","right","noOverlay","disableOverlayClick","isOpen","onStateChange","className","filteredLocations","length","type","placeholder","id","name","value","query","onChange","onQueryChange","map","library","index","tabIndex","key","concat","onClick","onViewportChange","openInfowindow","onMouseOver","React","Component","MapPin","_this$props","_this$props$size","size","height","viewBox","style","Object","objectSpread","cursor","fill","stroke","transform","d","PureComponent","Infowindow","info","displayName","tlnCode","role","aria-labelledby","rel","target","href","website","require","config","Map","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","_onViewportChange","viewport","_mapClickToCloseInfowindow","event","closeInfowindow","_closeInfowindow","_openInfowindow","_resize","bind","assertThisInitialized","window","addEventListener","removeEventListener","width","innerWidth","innerHeight","popupInfo","esm","tipSize","anchor","latitude","longitude","onClose","Infowindow_Infowindow","_this3","aria-label","assign","mapStyle","mapboxApiAccessToken","process","alt","MapPin_MapPin","selected","_renderPopup","App","componentDidMount","filtered","_filterLocations","all","sidebarOpen","_handleSidebarFocus","document","getElementById","focus","_handleQueryChange","filter","defineProperty","console","log","reciprocalBorrower","allLocations","location","toLowerCase","includes","sharedSystem","miLibraryCard","mel","_handleInfowindowFocus","querySelector","keyCode","_goToViewport","_ref","zoom","transitionInterpolator","FlyToInterpolator","transitionDuration","maxZoom","bearing","pitch","LIBRARIES","hasError","src_components_Sidebar","Map_Map","error","ReactDOM","render","App_App"],"mappings":"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","file":"static/js/main.a3d95a3c.chunk.js","sourcesContent":["import React from 'react';\r\nimport { slide as Menu } from 'react-burger-menu';\r\nimport './Sidebar.css';\r\n\r\nclass Sidebar extends React.Component {\r\n\r\n    // Filter libraries based on filter selection\r\n    _handleCheckboxChange = (checked) => {\r\n        this.setState({ reciprocalBorrowerChecked: checked });\r\n        // console.log(event.target.checked);\r\n        // console.log(this.state.reciprocalBorrowerChecked);\r\n        this.props.filterReciprocal(checked);\r\n    }\r\n\r\n    // Keep track of open/close sidebar state\r\n    _handleSidebarStateChange = (state) => {\r\n        this.props.handleSidebarStateChange(state);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Menu\r\n            right\r\n            noOverlay = {true}\r\n            disableOverlayClick\r\n            isOpen={this.props.isOpen}\r\n            onStateChange={(state) => this._handleSidebarStateChange(state)}\r\n            >\r\n                <div className=\"search-box\">\r\n                    <h1 className=\"sidebar-header\">Locations</h1>\r\n                    <p>Now listing\r\n                    <span> {this.props.filteredLocations ? this.props.filteredLocations.length : 97} </span>\r\n                    of\r\n                    {/* <span> {this.props.allLocations.length} libraries</span></p> */}\r\n                    <span> 97 libraries</span></p>\r\n                    <input\r\n                        type=\"search\"\r\n                        placeholder=\"Search here\"\r\n                        className=\"search-input\"\r\n                        id=\"search-input\"\r\n                        name=\"query\"\r\n                        value={this.props.query}\r\n                        onChange={this.props.onQueryChange}\r\n                    />\r\n                    <div className=\"filter-area\">\r\n                        <label>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            name=\"reciprocalBorrower\"\r\n                            onChange={this.props.onQueryChange}\r\n                        />\r\n                        Reciprocal Borrowers\r\n                        </label>\r\n                        <br/>\r\n                        <label>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            name=\"sharedSystem\"\r\n                            onChange={this.props.onQueryChange}\r\n                        />\r\n                        Shared System\r\n                        </label>\r\n                        <br/>\r\n                        <label>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            name=\"miLibraryCard\"\r\n                            onChange={this.props.onQueryChange}\r\n                        />\r\n                        MILibraryCard\r\n                        </label>\r\n                        <br/>\r\n                        <label>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            name=\"mel\"\r\n                            onChange={this.props.onQueryChange}\r\n                        />\r\n                        MeL\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div className=\"library-list\">\r\n                    {this.props.filteredLocations &&\r\n                        this.props.filteredLocations.map((library, index) => {\r\n                            return (\r\n                                <li\r\n                                    // add onkeypress\r\n                                    tabIndex=\"0\"\r\n                                    key={`library-${index}`}\r\n                                    className=\"library-list-items\"\r\n                                    onClick={() => {\r\n                                        this.props.onViewportChange(library);\r\n                                        this.props.openInfowindow(library);\r\n                                    }}\r\n                                    onMouseOver={() => {\r\n                                        this.props.openInfowindow(library);\r\n                                    }}\r\n                                >\r\n                                {`${library.name}`}\r\n                                </li>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </Menu>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Sidebar;","import React, { PureComponent } from 'react';\r\n\r\n// Map marker SVG path\r\nconst ICON = `M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\r\nc0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\r\nC20.1,15.8,20.2,15.8,20.2,15.7z`;\r\n\r\nexport default class MapPin extends PureComponent {\r\n    render() {\r\n\r\n        // Function to dynamically assign SVG style/fill color\r\n        let _getPinStyle = () => {\r\n            return {\r\n                cursor: 'pointer',\r\n                fill: this.props.fill,\r\n                stroke: 'none',\r\n                transform: `translate(${-size/2}px,${-size}px)`\r\n            }\r\n        }\r\n\r\n        const {size = 20, onClick, onMouseOver} = this.props;\r\n\r\n        return (\r\n            <svg height={size} viewBox='0 0 24 24'\r\n                // if keeping, implement ability to open infowindow with enter key press\r\n                // tabIndex=\"0\"\r\n                style={{..._getPinStyle()}}\r\n                onClick={onClick}\r\n                onMouseOver={onMouseOver}\r\n                >\r\n                <path d={ICON} />\r\n            </svg>\r\n        );\r\n    }\r\n}","import React, { PureComponent } from 'react';\r\n\r\nexport default class Infowindow extends PureComponent {\r\n\r\n    render() {\r\n        const {info} = this.props;\r\n        const displayName = `${info.name}`;\r\n        const tlnCode = `${info.tlnCode}`;\r\n\r\n        return (\r\n            <div\r\n                id=\"infowindow-container\"\r\n            >\r\n                <div\r\n                    tabIndex=\"0\"\r\n                    role=\"dialog\"\r\n                    aria-labelledby=\"dialog-title\"\r\n                    id=\"infowindow\"\r\n                >\r\n                    <span id=\"dialog-title\">{displayName}</span> | {tlnCode} | <a\r\n                        rel=\"noopener noreferrer\"\r\n                        target=\"_blank\"\r\n                        href={`${info.website}`}\r\n                        >\r\n                            Website\r\n                        </a>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","import React, { Component } from 'react';\r\nimport ReactMapGL, {NavigationControl, Marker, Popup} from 'react-map-gl';\r\nimport MapPin from './MapPin';\r\nimport Infowindow from './Infowindow';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport './Map.css';\r\nrequire('dotenv').config();\r\n\r\nconst MAPBOX_STYLE = 'mapbox://styles/mapbox/streets-v9';\r\nconst MAPBOX_TOKEN = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\r\n\r\nexport default class Map extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this._resize = this._resize.bind(this);\r\n  }\r\n  \r\n  // Attach and remove (below) resize event listener to window to update map/viewport state if user resizes\r\n  componentDidMount() {\r\n    window.addEventListener('resize', this._resize);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this._resize);\r\n  }\r\n\r\n  // Call to parent viewport change to change viewport state based on current map data\r\n  _onViewportChange = (viewport) => {\r\n    this.props.onViewportChange(viewport);\r\n  }\r\n\r\n  // Close infowindow if user clicks outside of infowindow on the map without interacting with map\r\n  _mapClickToCloseInfowindow = (event) => {\r\n    if (event.target.className === \"overlays\") {\r\n      this.props.closeInfowindow();\r\n    }\r\n  }\r\n\r\n  _closeInfowindow = () => {\r\n    this.props.closeInfowindow();\r\n  }\r\n\r\n  _openInfowindow = (library) => {\r\n    this.props.openInfowindow(library);\r\n  }\r\n\r\n  // Update App.js viewport state for new window size if user resizes window\r\n  _resize() {\r\n    this.props.onViewportChange({\r\n      width: window.innerWidth,\r\n      height: window.innerHeight\r\n    });\r\n  }\r\n\r\n  // Render infowindow with correct info\r\n  _renderPopup() {\r\n    const popupInfo = this.props.popupInfo;\r\n\r\n    return popupInfo && (\r\n      <Popup\r\n        tipSize={5}\r\n        anchor=\"top\"\r\n        latitude={popupInfo.latitude}\r\n        longitude={popupInfo.longitude}\r\n        onClose={() => this._closeInfowindow()}\r\n      >\r\n      <Infowindow info={popupInfo} />\r\n      </Popup>\r\n    );\r\n  }\r\n\r\n  render() {\r\n      return (\r\n        <main\r\n          role=\"application\"\r\n          aria-label=\"map of libraries in The Library Network\"\r\n          tabIndex=\"0\"\r\n        >\r\n          <ReactMapGL          \r\n            {...this.props.viewport}\r\n            mapStyle={MAPBOX_STYLE}\r\n            mapboxApiAccessToken={MAPBOX_TOKEN}\r\n            onViewportChange={viewport => this._onViewportChange(viewport)}\r\n            onClick={event => this._mapClickToCloseInfowindow(event)}\r\n            >\r\n\r\n            {this.props.filteredLocations &&\r\n                this.props.filteredLocations.map((library, index) => {\r\n                    return (\r\n                    <Marker\r\n                      key={`marker-${index}`}\r\n                      latitude={library.latitude}\r\n                      longitude={library.longitude}\r\n                      alt={library.name}\r\n                    >\r\n                    <MapPin\r\n                      // size={20}\r\n                      onMouseOver={() => this._openInfowindow(library)}\r\n                      onClick={() => this._openInfowindow(library)}\r\n                      popupInfo={this.props.popupInfo}\r\n                      fill={(library.selected === \"y\" ? \"red\" : \"blue\")}\r\n                    />\r\n                    </Marker>\r\n                    )\r\n                })\r\n            }\r\n\r\n            {this._renderPopup()}\r\n\r\n            <div className=\"map-nav\">\r\n              <NavigationControl\r\n                onViewportChange={viewport => this._onViewportChange(viewport)}\r\n                />\r\n            </div>\r\n          </ReactMapGL>\r\n        </main>\r\n      )\r\n  }\r\n}","import React, { Component } from 'react';\nimport {FlyToInterpolator} from 'react-map-gl';\nimport Sidebar from './components/Sidebar';\nimport Map from './components/Map';\nimport LIBRARIES from './data/libraries.json';\nimport './App.css';\n\nexport default class App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      viewport: {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        latitude: 42.473091,\n        longitude: -83.221076,\n        zoom: 9,\n        maxZoom: 17,\n        bearing: 0,\n        pitch: 0\n      },\n      sidebarOpen: false,\n      popupInfo: null,\n      all: LIBRARIES,\n      filtered: null,\n      filter: {\n        query: '',\n        reciprocalBorrower: false,\n        sharedSystem: false,\n        miLibraryCard: false,\n        mel: false\n      },\n      hasError: false\n    };\n    // this._openInfowindow = this._openInfowindow.bind(this);\n    // this._closeInfowindow = this._closeInfowindow.bind(this);\n    // this._handleSidebarStateChange = this._handleSidebarStateChange.bind(this);\n    // this._onViewportChange = this._onViewportChange.bind(this);\n    // this._handleQueryChange = this._handleQueryChange.bind(this);\n  }\n\n  // Retrieve library data and set initial state\n\n  componentDidMount = () => {\n    this.setState({\n      filtered: this._filterLocations(this.state.all, \"\")\n    });\n\n    // fetch('https://api.myjson.com/bins/p8xk6')\n    //   .then(response => response.json())\n    //   .then(libraryJSON => this.setState({all: libraryJSON, filtered: libraryJSON }))\n    //   .catch(error => {\n    //     alert(\"Unfortunately there was an error returning the data for this map. Please try again soon.\")\n    //   });\n  }\n\n  // Error checking for this and child components\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  // Check if sidebar is open and if so move focus into the search input\n  _handleSidebarStateChange = (state) => {\n    this.setState({ sidebarOpen: state.isOpen }, function() {\n      this._handleSidebarFocus();\n    });\n  }\n\n  _handleSidebarFocus = () => {\n    if (this.state.sidebarOpen === true) {\n      document.getElementById('search-input').focus();\n  }\n  }\n\n  // Filter locations with each updated query\n  // _updateQuery = (newQuery, isReciprocalBorrowerChecked) => {\n  //   this.setState({\n  //     filtered: this._filterLocations(this.state.all, newQuery, isReciprocalBorrowerChecked)\n  //   });\n  // }\n\n  _handleQueryChange = (event) => {\n    const value = event.target.type === 'checkbox' ? event.target.checked : event.target.value;\n    const name = event.target.name;\n    this.setState({\n      // query: newQuery,\n      // reciprocalBorrower: isReciprocalBorrowerChecked\n      // [name]: value\n      filter: {...this.state.filter, [name]: value}\n    }, () => {\n      console.log(this.state.filter);\n      console.log(this.state.filter.reciprocalBorrower);\n      // console.log(this.state.sharedSystem);\n      this.setState({\n        filtered: this._filterLocations(this.state.all)\n      })\n    })\n  }\n\n  _filterLocations = (allLocations) => {\n    let filter = this.state.filter;\n    // return allLocations.filter(location =>\n    //   location.name.toLowerCase().includes(filter.query.toLowerCase())\n    //   && location.reciprocalBorrower === filter.reciprocalBorrower)\n    // };\n    let filtered = allLocations.filter(location => {\n      // Check each filter, kick out of array if not meeting requirement\n      if (!location.name.toLowerCase().includes(filter.query.toLowerCase())) {\n        return false;\n      }\n      if (filter.reciprocalBorrower && !location.reciprocalBorrower) {\n        return false;\n      }\n      if (filter.sharedSystem && !location.sharedSystem) {\n        return false;\n      }\n      if (filter.miLibraryCard && !location.miLibraryCard) {\n        return false;\n      }\n      if(filter.mel && !location.mel) {\n        return false;\n      }\n      return true;\n    });\n    return filtered;\n    }\n    // let query = this.state.query;\n    // let rB = this.state.reciprocalBorrower;\n    // let sS = this.state.sharedSystem;\n    // if (query !== \"\" && rB) {\n    //   return allLocations.filter(location => location.name.toLowerCase().includes(query.toLowerCase()) && location.reciprocalBorrower === \"y\");\n    // }\n    // if (sS) {\n    //   return allLocations.filter(location => location.sharedSystem === \"y\");\n    // }\n    // if (rB) {\n    //   return allLocations.filter(location => location.reciprocalBorrower === \"y\");\n    // }\n    // if (query !== \"\") {\n    //   return allLocations.filter(location => location.name.toLowerCase().includes(query.toLowerCase()));\n    // }\n    // else {\n    //   return allLocations;\n    // }}\n\n  // Return all locations to unselected, close infowindow, and return appropriate focus\n  _closeInfowindow = () => {\n    this.state.all.map(library => library.selected = \"n\");\n    this.setState({ popupInfo: null }, function() {\n      this._handleInfowindowFocus();\n    });\n  }\n\n  // Select appropriate location marker, open infowindow, lock focus on infowindow and allow user to press enter to close infowindow\n  _openInfowindow = (library) => {\n    this.state.all.map(library => library.selected = \"n\");\n    library.selected = \"y\";\n    this.setState({ popupInfo: library }, function() {\n      this._handleInfowindowFocus();\n      document.querySelector('.mapboxgl-popup-content button').addEventListener(\"keydown\", \n        function(event) {\n          if (event.keyCode === 13) {\n            this._closeInfowindow();\n          }\n      }.bind(this));\n    });\n  }\n\n  // Handle infowindow lock focus when open and when closed\n  _handleInfowindowFocus = () => {\n    if (this.state.popupInfo) {\n      document.querySelector('.mapboxgl-popup-content button').focus();\n    }\n    if (!this.state.popupInfo && this.state.sidebarOpen === true) {\n      document.getElementById('search-input').focus();\n    }\n  }\n\n  // Update viewport state data when map is changed by user\n  _onViewportChange = (viewport) => {\n    this.setState({\n      viewport: {...this.state.viewport, ...viewport}\n    });\n}\n\n  // Zoom into marker when location is selected from sidebar list\n  _goToViewport = ({longitude, latitude}) => {\n    this._onViewportChange({\n      longitude,\n      latitude,\n      zoom: 14,\n      transitionInterpolator: new FlyToInterpolator(),\n      transitionDuration: 1000\n    });\n  }\n\n  // Check for error, then render component\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong!</h1>;\n    }\n    \n    return (\n      <div>\n        <Sidebar\n          onViewportChange={this._goToViewport}\n          openInfowindow={this._openInfowindow}\n          allLocations={this.state.all}\n          filteredLocations={this.state.filtered}\n          isOpen={this.state.sidebarOpen}\n          handleSidebarStateChange={this._handleSidebarStateChange}\n          // filterReciprocal={this._updateReciprocal}\n          query={this.state.query}\n          onQueryChange={this._handleQueryChange}\n        />\n          <Map\n            viewport={this.state.viewport}\n            onViewportChange={this._onViewportChange}\n            popupInfo={this.state.popupInfo}\n            openInfowindow={this._openInfowindow}\n            closeInfowindow={this._closeInfowindow}\n            allLocations={this.state.all}\n            filteredLocations={this.state.filtered}\n          ></Map>\n        </div>\n    );\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}