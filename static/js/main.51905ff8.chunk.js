(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,n,t){e.exports=t(84)},49:function(e,n,t){},73:function(e,n,t){},77:function(e,n,t){},82:function(e,n,t){},84:function(e,n,t){"use strict";t.r(n);var o=t(1),i=t.n(o),a=t(19),r=t.n(a),c=(t(49),t(15)),s=t(2),l=t(3),u=t(6),p=t(4),d=t(5),f=t(7),h=t(10),w=t(43),b=(t(73),function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(u.a)(this,Object(p.a)(n).call(this,e)))._handleSidebarStateChange=function(e){t.props.handleSidebarStateChange(e)},t._updateQuery=function(e){t.setState({query:e}),t.props.filterLocations(e)},t.state={query:""},t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement(w.slide,{right:!0,noOverlay:!0,disableOverlayClick:!0,isOpen:this.props.isOpen,onStateChange:function(n){return e._handleSidebarStateChange(n)}},i.a.createElement("div",{className:"search-box"},i.a.createElement("h1",{className:"sidebar-header"},"Locations"),i.a.createElement("p",null,"Now listing",i.a.createElement("span",null," ",this.props.filteredLocations?this.props.filteredLocations.length:10," "),"of",i.a.createElement("span",null," 10 libraries")),i.a.createElement("input",{type:"text",placeholder:"Search here",className:"search-input",id:"search-input",name:"filter",value:this.state.query,onChange:function(n){return e._updateQuery(n.target.value)}})),i.a.createElement("div",{className:"library-list"},this.props.filteredLocations&&this.props.filteredLocations.map(function(n,t){return i.a.createElement("li",{tabIndex:"0",key:"library-".concat(t),className:"library-list-items",onClick:function(){e.props.onViewportChange(n),e.props.openInfowindow(n)},onMouseOver:function(){e.props.openInfowindow(n)}},"".concat(n.name))})))}}]),n}(i.a.Component)),m=function(e){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(p.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.size,o=void 0===t?20:t,a=n.onClick,r=n.onMouseOver;return i.a.createElement("svg",{height:o,viewBox:"0 0 24 24",style:Object(c.a)({},{cursor:"pointer",fill:e.props.fill,stroke:"none",transform:"translate(".concat(-o/2,"px,").concat(-o,"px)")}),onClick:a,onMouseOver:r},i.a.createElement("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\nc0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\nC20.1,15.8,20.2,15.8,20.2,15.7z"}))}}]),n}(o.PureComponent),g=function(e){function n(){return Object(s.a)(this,n),Object(u.a)(this,Object(p.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this.props.info,n="".concat(e.name),t="".concat(e.tlnCode);return i.a.createElement("div",{id:"infowindow-container"},i.a.createElement("div",{tabIndex:"0",role:"dialog","aria-labelledby":"dialog-title",id:"infowindow"},i.a.createElement("span",{id:"dialog-title"},n)," | ",t," | ",i.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"".concat(e.website)},"Website")))}}]),n}(o.PureComponent);t(75),t(77);t(79).config();var v=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(u.a)(this,Object(p.a)(n).call(this,e)))._onViewportChange=function(e){t.props.onViewportChange(e)},t._mapClickToCloseInfowindow=function(e){"overlays"===e.target.className&&t.props.closeInfowindow()},t._closeInfowindow=function(){t.props.closeInfowindow()},t._openInfowindow=function(e){t.props.openInfowindow(e)},t._resize=t._resize.bind(Object(f.a)(Object(f.a)(t))),t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this._resize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resize)}},{key:"_resize",value:function(){this.props.onViewportChange({width:window.innerWidth,height:window.innerHeight})}},{key:"_renderPopup",value:function(){var e=this,n=this.props.popupInfo;return n&&i.a.createElement(h.d,{tipSize:5,anchor:"top",latitude:n.latitude,longitude:n.longitude,onClose:function(){return e._closeInfowindow()}},i.a.createElement(g,{info:n}))}},{key:"render",value:function(){var e=this;return i.a.createElement("main",{role:"application","aria-label":"map of libraries in The Library Network",tabIndex:"0"},i.a.createElement(h.e,Object.assign({},this.props.viewport,{mapStyle:"mapbox://styles/mapbox/streets-v9",mapboxApiAccessToken:"pk.eyJ1Ijoic3RldmVucmVtZW5hcHAiLCJhIjoiY2pndm5sODNmMTBlZDJ3bnY2ZTBsdnl3NyJ9.e4iOvDiQjPMT9ebCzL6CKA",onViewportChange:function(n){return e._onViewportChange(n)},onClick:function(n){return e._mapClickToCloseInfowindow(n)}}),this.props.filteredLocations&&this.props.filteredLocations.map(function(n,t){return i.a.createElement(h.b,{key:"marker-".concat(t),latitude:n.latitude,longitude:n.longitude,alt:n.name},i.a.createElement(m,{size:20,onMouseOver:function(){return e._openInfowindow(n)},onClick:function(){return e._openInfowindow(n)},popupInfo:e.props.popupInfo,fill:"y"===n.selected?"red":"blue"}))}),this._renderPopup(),i.a.createElement("div",{className:"map-nav"},i.a.createElement(h.c,{onViewportChange:function(n){return e._onViewportChange(n)}}))))}}]),n}(o.Component),O=(t(82),function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(u.a)(this,Object(p.a)(n).call(this,e))).componentDidMount=function(){fetch("https://api.myjson.com/bins/p8xk6").then(function(e){return e.json()}).then(function(e){return t.setState({all:e,filtered:e})}).catch(function(e){alert("Unfortunately there was an error returning the data for this map. Please try again soon.")})},t._handleSidebarStateChange=function(e){t.setState({sidebarOpen:e.isOpen},function(){this._handleSidebarFocus()})},t._handleSidebarFocus=function(){!0===t.state.sidebarOpen&&document.getElementById("search-input").focus()},t._updateQuery=function(e){t.setState({filtered:t._filterLocations(t.state.all,e)})},t._filterLocations=function(e,n){return e.filter(function(e){return e.name.toLowerCase().includes(n.toLowerCase())})},t._closeInfowindow=function(){t.state.all.map(function(e){return e.selected="n"}),t.setState({popupInfo:null},function(){this._handleInfowindowFocus()})},t._openInfowindow=function(e){t.state.all.map(function(e){return e.selected="n"}),e.selected="y",t.setState({popupInfo:e},function(){this._handleInfowindowFocus(),document.querySelector(".mapboxgl-popup-content button").addEventListener("keydown",function(e){13===e.keyCode&&this._closeInfowindow()}.bind(this))})},t._handleInfowindowFocus=function(){t.state.popupInfo&&document.querySelector(".mapboxgl-popup-content button").focus(),t.state.popupInfo||!0!==t.state.sidebarOpen||document.getElementById("search-input").focus()},t._onViewportChange=function(e){t.setState({viewport:Object(c.a)({},t.state.viewport,e)})},t._goToViewport=function(e){var n=e.longitude,o=e.latitude;t._onViewportChange({longitude:n,latitude:o,zoom:14,transitionInterpolator:new h.a,transitionDuration:1e3})},t.state={viewport:{width:window.innerWidth,height:window.innerHeight,latitude:42.473091,longitude:-83.221076,zoom:10,maxZoom:17,bearing:0,pitch:0},sidebarOpen:!1,popupInfo:null,all:[],filtered:null,hasError:!1},t._openInfowindow=t._openInfowindow.bind(Object(f.a)(Object(f.a)(t))),t._closeInfowindow=t._closeInfowindow.bind(Object(f.a)(Object(f.a)(t))),t._handleSidebarStateChange=t._handleSidebarStateChange.bind(Object(f.a)(Object(f.a)(t))),t._onViewportChange=t._onViewportChange.bind(Object(f.a)(Object(f.a)(t))),t}return Object(d.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return this.state.hasError?i.a.createElement("h1",null,"Something went wrong!"):i.a.createElement("div",null,i.a.createElement(b,{onViewportChange:this._goToViewport,openInfowindow:this._openInfowindow,allLocations:this.state.all,filteredLocations:this.state.filtered,filterLocations:this._updateQuery,isOpen:this.state.sidebarOpen,handleSidebarStateChange:this._handleSidebarStateChange}),i.a.createElement(v,{viewport:this.state.viewport,onViewportChange:this._onViewportChange,popupInfo:this.state.popupInfo,openInfowindow:this._openInfowindow,closeInfowindow:this._closeInfowindow,allLocations:this.state.all,filteredLocations:this.state.filtered}))}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(o.Component)),y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(O,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/tlnmap",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("/tlnmap","/service-worker.js");y?(function(e,n){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):C(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):C(n,e)})}}()}},[[44,2,1]]]);
//# sourceMappingURL=main.51905ff8.chunk.js.map